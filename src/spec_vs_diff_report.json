{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-08T19:34:07.929Z",
  "summary": "Frontend now calls a backend verification method instead of a mock and adds a Superadmin Pengaturan view + React Query hooks for fetching/updating access codes. However, key parts of the backend contract and the required code status support (including viewing/updating status and enforcing inactive codes as invalid) are not evidenced in the diff, and the Superadmin UI/hook only updates code values (not statuses).",
  "missing_requirements": [
    {
      "id": "REQ-1",
      "requirement": "Backend verification must return ok=true and a backend-provided route string (/internal/login for Code A, /internal/daftar for Code B), and reject others as invalid without trapping.",
      "reason": "Frontend expects `actor.verifyAccessCode(code)` to return `InternalLoginType | null` and then maps that enum to routes on the client; there is no evidence of a backend response that includes a route string and ok flag as specified.",
      "evidence": [
        "frontend/src/hooks/useInternalAccessCodes.ts",
        "frontend/src/pages/InternalGatePage.tsx"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "Backend query API must return internal access codes including: code type (A/B), code value, last updated timestamp, and a status field.",
      "reason": "The only backend type shown for internal access codes includes `code`, `codeType`, and `lastUpdated`â€”no `status` field is present in the diff excerpt.",
      "evidence": [
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "Backend update API must allow SUPERADMIN to set Code A value, Code B value, and their statuses; non-SUPERADMIN callers rejected; inactive/disabled codes must fail verification.",
      "reason": "The frontend mutation calls `actor.manageAccessCode(codeType, newCode)` and the settings UI only edits `newCode`; there is no evidence of any status parameter, status enforcement in verification, or authorization checks in the backend diff excerpt.",
      "evidence": [
        "frontend/src/hooks/useInternalAccessCodes.ts",
        "frontend/src/components/superadmin/SuperadminInternalAccessCodesSettingsView.tsx",
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-4",
      "requirement": "Superadmin Pengaturan tab must display Code A and Code B with label, current code value, status, and last updated time; and provide controls to update both code values and statuses.",
      "reason": "The added settings view state and save handlers only cover code values (`codeAValue`, `codeBValue`) and update via `newCode` only; status viewing/editing is not evidenced in the shown code.",
      "evidence": [
        "frontend/src/components/superadmin/SuperadminInternalAccessCodesSettingsView.tsx",
        "frontend/src/hooks/useInternalAccessCodes.ts"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.68,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/components/superadmin/SuperadminInternalAccessCodesSettingsView.tsx",
    "frontend/src/hooks/useInternalAccessCodes.ts",
    "frontend/src/pages/InternalGatePage.tsx",
    "frontend/src/pages/superadmin/SuperadminDashboardPage.tsx",
    "project_state.json"
  ]
}